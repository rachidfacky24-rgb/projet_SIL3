{% extends 'base.html' %}
{% load static %}

{% block title %}Ajouter un √âtudiant{% endblock %}

{% block content %}
<div class="form-container-wrapper">
<div class="form-container">
    <div class="form-header">
        <div class="form-icon-wrapper">
            <div class="form-icon">üë§</div>
        </div>
        <h1 class="form-title">Ajouter un Nouvel √âtudiant</h1>
        <p class="form-subtitle">Remplissez le formulaire pour cr√©er un nouvel √©tudiant</p>
    </div>

    <form method="post" class="student-form" id="studentForm">
        {% csrf_token %}
        
        <div class="form-grid">
            <div class="form-group full-width">
                <label for="{{ form.promotion.id_for_label }}" class="form-label">
                    <span class="label-icon">üéì</span>
                    {{ form.promotion.label }}
                </label>
                {{ form.promotion }}
                {% if form.promotion.errors %}
                    <div class="error-message">{{ form.promotion.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.nom.id_for_label }}" class="form-label">
                    <span class="label-icon">üìù</span>
                    {{ form.nom.label }}
                </label>
                {{ form.nom }}
                {% if form.nom.errors %}
                    <div class="error-message">{{ form.nom.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.prenom.id_for_label }}" class="form-label">
                    <span class="label-icon">üìù</span>
                    {{ form.prenom.label }}
                </label>
                {{ form.prenom }}
                {% if form.prenom.errors %}
                    <div class="error-message">{{ form.prenom.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.numero_etudiant.id_for_label }}" class="form-label">
                    <span class="label-icon">üî¢</span>
                    {{ form.numero_etudiant.label }}
                </label>
                {{ form.numero_etudiant }}
                {% if form.numero_etudiant.errors %}
                    <div class="error-message">{{ form.numero_etudiant.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.email.id_for_label }}" class="form-label">
                    <span class="label-icon">‚úâÔ∏è</span>
                    {{ form.email.label }}
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                    <div class="error-message">{{ form.email.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.date_naissance.id_for_label }}" class="form-label">
                    <span class="label-icon">üìÖ</span>
                    {{ form.date_naissance.label }}
                </label>
                {{ form.date_naissance }}
                {% if form.date_naissance.errors %}
                    <div class="error-message">{{ form.date_naissance.errors }}</div>
                {% endif %}
            </div>

            <div class="form-group full-width">
                <label for="{{ form.moyenne_generale.id_for_label }}" class="form-label">
                    <span class="label-icon">‚≠ê</span>
                    {{ form.moyenne_generale.label }}
                </label>
                <div class="moyenne-input-wrapper">
                    {{ form.moyenne_generale }}
                    <div class="moyenne-slider">
                        <input type="range" id="moyenneSlider" min="0" max="20" step="0.1" value="0">
                        <div class="slider-labels">
                            <span>0</span>
                            <span>10</span>
                            <span>20</span>
                        </div>
                    </div>
                </div>
                {% if form.moyenne_generale.errors %}
                    <div class="error-message">{{ form.moyenne_generale.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-primary btn-submit">
                <span class="btn-text">Cr√©er l'√âtudiant</span>
                <span class="btn-loader"></span>
            </button>
            <a href="{% url 'index' %}" class="btn btn-secondary">Annuler</a>
        </div>
    </form>
</div>

<div class="preview-card" id="previewCard">
    <div class="preview-header">
        <h3>‚ú® Aper√ßu en Temps R√©el</h3>
    </div>
    <div class="preview-content">
        <div class="preview-item">
            <span class="preview-label">Nom complet:</span>
            <span class="preview-value" id="previewName">-</span>
        </div>
        <div class="preview-item">
            <span class="preview-label">Promotion:</span>
            <span class="preview-value" id="previewPromotion">-</span>
        </div>
        <div class="preview-item">
            <span class="preview-label">Moyenne:</span>
            <span class="preview-value" id="previewMoyenne">0.00</span>
        </div>
        <div class="preview-item highlight-item" id="previewRanking" style="display: none;">
            <span class="preview-label">üìä Classement estim√©:</span>
            <span class="preview-value ranking-value" id="previewRank">-</span>
        </div>
    </div>
    <div class="preview-note" id="previewNote" style="display: none;">
        <p>üí° Le classement sera calcul√© automatiquement apr√®s la cr√©ation</p>
    </div>
</div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/form.js' %}"></script>
{% endblock %}

